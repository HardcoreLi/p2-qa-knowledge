---
title: "活动开启机制参考"
aliases:
  - "活动机制"
  - "开启机制"
  - "定时开启"
  - "循环开启"
  - "后台开启"
  - "跨服开启"
  - "条件触发"
tags:
  - "参考"
  - "活动"
  - "测试"
updated: "2026-02-12"
source: "P2_GM指令 Google Sheet - P2-活动开启机制参考"
---

# 活动开启机制参考

## 简答
> 活动开启机制分为：定时开启、循环开启、后台开启、条件触发开启、跨服开启。测试时需要根据 2111 表的 S_MAP_start_trigger 字段判断开启方式。

---

## 开启机制一览

| 机制 | 条件 | 表现 | 备注 |
|------|------|------|------|
| **定时开启** | 到达服务器开启后的固定时间 | 活动开启，开启时间符合需求 | 2111 表 S_MAP_start_trigger |
| **循环开启** | 到达循环开启时间 | 每次到达循环开启时间均能正常开启 | - |
| **后台开启** | 后台选中活动、设置时间、点击开启 | 预告期、持续时间、展示期均符合需求 | `{"typ":"time","is_ark":1}` |
| **条件触发开启** | 满足触发条件 | 满足条件后活动开启 | 可能代码或配置控制 |
| **跨服开启** | 满足跨服条件 | 所有服数据互通 | 需确认跨服分组方式 |

---

## 定时开启

**触发条件**：在游戏内到达服务器开启后的固定时间

**验证要点**：
- 活动开启时间符合需求
- 配置表：2111 表 `S_MAP_start_trigger` 字段

---

## 循环开启

**触发条件**：在游戏内到达循环开启时间

**验证要点**：
- 每次到达循环开启时间均能正常开启
- 循环开启时间符合需求

---

## 后台开启

**触发条件**：在后台选中本活动、设置预告期、开启时间、结束时间、展示时间、开启服务器，点击开启

**验证要点**：
- 活动预告期时长符合需求
- 持续时间符合需求
- 展示期时长符合需求
- 活动到达设置的开启时间后正常开启

**配置判断**：
- 2111 表的 `S_MAP_start_trigger` 字段为 `{"typ":"time","is_ark":1}` 则是后台开启
- 需要和策划确认是否有预告期和展示期，持续时间是多久

---

## 条件触发开启

**触发条件**：满足特定触发条件

**验证要点**：
- 触发条件符合需求
- 满足触发条件后活动开启

**测试方法**：
- 需要看策划的需求是满足什么条件触发
- 可能代码控制，也可能配置控制
- 用例使用**等价类**和**边界值**覆盖检查

---

## 跨服开启

### 跨服类型

| 类型 | 说明 | 验证要点 |
|------|------|----------|
| **同 group 服跨服** | 相同 group 的服跨服 | 相同 group 的服所有数据互通 |
| **同 schema 服跨服** | 相同 schema 的服跨服 | 相同 schema 的服所有数据互通 |
| **后台跨服** | 在后台选中跨服，输入不同服务器并开启 | 所有输入的服务器数据互通 |
| **其他条件跨服** | 满足特定跨服条件 | 满足条件的服数据互通 |

**测试准备**：
- 需要提前与策划沟通是否跨服
- 确认通过什么条件控制跨服分组
- 可能由代码控制，也可能配置控制

---

## 常见坑点

- **后台开启判断**：看 2111 表 `is_ark` 字段是否为 1
- **跨服分组**：不同活动跨服分组方式不同，需要确认
- **预告期/展示期**：部分活动有，部分没有，需要和策划确认
- **条件触发**：触发条件可能在代码中，需要看需求文档
