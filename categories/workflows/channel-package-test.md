---
title: "新增安卓渠道包测试流程"
aliases:
  - "渠道包测试"
  - "新渠道包"
  - "mj包"
  - "渠道验证"
  - "新增渠道"
  - "渠道包流程"
tags:
  - "流程"
  - "测试"
  - "渠道"
updated: "2026-02-12"
source: "https://wiki.tap4fun.com/pages/viewpage.action?pageId=191341670"
---

# 新增安卓渠道包测试流程

## 简答
> 新增渠道包需要完成打包工程配置、aab上传、谷歌后台配置、TGS entrance配置、支付验证、推送验证等步骤。

---

## 前期准备流程

市场部同事申请新的 bundle ID（待补充）

---

## 渠道包测试内部流程

### 1. 打包工程配置
找超帅在打包工程上新增对应渠道包选项
- **注意**：测试工程与线上正式工程都要加

### 2. 准备并上传 AAB 包
- 使用单独分支或 bugfix 分支准备好 aab 包
- 先发给超帅上传（测试 aab 无法自动上传，正式的可以）
- 观察 develop 群内打包上传消息

### 3. 谷歌后台配置
与 zoe 确认：
- 该渠道包谷歌后台是否配置了商品
- TGS 是否新增了验单配置

### 4. 推送服务配置
与超帅确认测试包是否配置了推送服务账号（与主包一致）

### 5. 安装 AAB 包
装 aab 时必须输入证书：
- 使用原生谷歌框架手机装包
- 证书与包名关联，如：
  - `tap4fun.p2.mjx`（x 为 mj 包编号，依次为 1、2、3...）
  - `tap4fun.p2`（主包）

📎 [aab装包文档](https://wiki.tap4fun.com/pages/viewpage.action?pageId=71782874)

### 6. TGS Entrance 配置
在 TGS 上新增 entrance 映射或单独配置（可参考已存在的渠道包）

### 7. OTA 启动入口
找超帅新增单独的启动入口

### 8. Ondemand 配置
配置成对应裸包版本号

### 9. Closed Testing 配置
找张晋戈在后台开通渠道包的 closed testing（封闭测试）
- 需审核，约 3 小时左右

### 10. 获取下载链接
找市场部同学提供下载链接，每个新渠道包都有单独的链接

例如 mj5：https://play.google.com/apps/testing/com.tap4fun.apemj5.gplay

- 用公司账号（androidtest@nibirutech.com）加入白名单
- 通过审核后进入链接，下载包后测试支付、价格

### 11. VK 配置（俄罗斯渠道）
找市场部的郭易峰配置 VK（俄罗斯网络环境下显示 VK 登录）

---

## 单独分支上验证包常规功能

执行新增渠道包测试用例，一般与新渠道包小游戏功能用例放在一起。

**主要包括**：支付、推送等包常规内容

### 异常问题处理方法

| 问题 | 解决方法 |
|------|----------|
| 谷歌账号登录不上 | 1. 使用原生谷歌框架手机<br>2. 与客户端确认安装 aab 时的证书是否正确 |
| 无法拉起支付弹窗 | 1. 与客户端确认测试 aab 包已上传<br>2. 与 zoe 确认谷歌后台是否配置了对应商品 |
| 支付不到账 | 1. 找平台同学查包的验单参数（不能和主包一致）<br>2. 确定后让客户端同学修改（修改后不用重新打包） |
| 收不到推送 | 与客户端确认是否配置了测试包的推送服务账号 |
| 礼包价格不是标准档位格式 | 与 zoe 确认导入谷歌后台价格模板后是否有默认价格 |

---

## 正式包验证、上线

（还是在测试环境，和单独分支一样，跑一级冒烟用例）

1. 合并到即将发布的渠道分支（一般是 hotfix），打正式 aab 包
   - 注意版本号与包的主体内容版本一致
   - 执行一级冒烟用例 - 大版本包分页
2. 确认正式包是否上传成功
3. 与超哥确认新增的渠道包线上 entrance 是单独配置还是配置映射【版本负责人】
4. 使用正式包进线上，简单验证支付、推送等常规正常
5. 登录支付，如果有问题需要重新测试，需要发布 internal release（张晋戈或 zoe 操作）

全部测试通过后与超哥、zoe 反馈测试结果，可正常提审。

---

## 市场 SDK 连通性测试

针对要上架 Google Play 的包，测试通过才能保证市场广告投放、买量等数据记录准确。

### 1. Adjust
- QA 负责测试
- 需找一台安卓设备，向市场部郭易峰提供设备的 GAID
- 在 GP 商店下载安装要测试的包，找郭易峰查询安装记录

### 2. Facebook
由市场部同学自行测试，同时超帅查看日志辅助

### 3. Firebase
暂时由超帅测试，后面提供测试文档交由 QA

---

## 常见坑点

- **证书填错**：证书与包名关联，不同渠道包使用不同证书
- **验单参数与主包一致**：会导致支付不到账
- **忘记配置推送服务账号**：导致收不到推送
- **未等待 closed testing 审核通过**：无法从链接下载包

---

## 相关链接
- [aab 装包文档](https://wiki.tap4fun.com/pages/viewpage.action?pageId=71782874)
- [Wiki 原文](https://wiki.tap4fun.com/pages/viewpage.action?pageId=191341670)
